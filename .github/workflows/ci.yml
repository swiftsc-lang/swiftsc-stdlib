name: Stdlib Validation

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    name: Validate Stdlib
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Audit Files
      run: |
        echo "Checking for essential stdlib modules..."
        FILES=("blockchain.stc" "collections.stc" "math.stc" "token.stc")
        for file in "${FILES[@]}"; do
          if [ -f "$file" ]; then
            echo "✓ $file found"
          else
            echo "✗ $file missing"
            exit 1
          fi
        done
        
    - name: Version Check
      run: |
        if [ -f VERSION ]; then
          VERSION=$(cat VERSION)
          echo "Stdlib Version: $VERSION"
        else
          echo "✗ VERSION file missing"
          exit 1
        fi
